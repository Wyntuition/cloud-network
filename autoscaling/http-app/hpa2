apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
spec:
  minReplicas: 2
  maxReplicas: 10
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 60  # 1-minute delay before scaling up
      policies:
      - type: Percent
        value: 100    # Can double current replicas
        periodSeconds: 15
      - type: Pods
        value: 4      # Or add up to 4 pods
        periodSeconds: 15
      selectPolicy: Max  # Choose most aggressive policy
    
    scaleDown:
      stabilizationWindowSeconds: 120  # 2-minute delay before scaling down
      policies:
      - type: Percent
        value: 50     # Can reduce by up to 50%
        periodSeconds: 15
      - type: Pods
        value: 2      # Or remove up to 2 pods
        periodSeconds: 15
      selectPolicy: Min  # Choose most conservative policy